# ğŸš—ğŸ”§ 404 ìŠ¤ë§ˆíŠ¸ íŒ©í† ë¦¬ ì‹œìŠ¤í…œ

ì‹¤ì‹œê°„ IoT ì„¼ì„œì™€ AI ì¹´ë©”ë¼ë¥¼ í™œìš©í•œ ìë™ì°¨ í’ˆì§ˆ ê²€ì‚¬ ì‹œìŠ¤í…œ ë° ê·¼íƒœ/ì±„íŒ… ê´€ë¦¬ ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

# 404found 2ì°¨ í”„ë¡œì íŠ¸
> **í”„ë¡œì íŠ¸ì˜ ëª¨ë“  ê³¼ì •ì„ ë‹´ì€ ìƒì„¸ ì‹œì—° ì˜ìƒì…ë‹ˆë‹¤.** > ì´ë¯¸ì§€ ë˜ëŠ” ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ìœ íŠœë¸Œ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.
<div align="center">
  <a href="https://www.youtube.com/watch?v=gPBmVkVSfhc">
    <img src="https://img.youtube.com/vi/gPBmVkVSfhc/maxresdefault.jpg" width="80%" alt="404found 2ì°¨ í”„ë¡œì íŠ¸ ì‹œì—°ì˜ìƒ">
    <br>
    <img src="https://img.shields.io/badge/YouTube-Watch_Video-red?style=for-the-badge&logo=youtube" alt="Youtube Button">
  </a>
</div>

## ğŸ“‹ ëª©ì°¨

- [í”„ë¡œì íŠ¸ ê°œìš”](#í”„ë¡œì íŠ¸-ê°œìš”)
- [ì£¼ìš” ê¸°ëŠ¥](#ì£¼ìš”-ê¸°ëŠ¥)
- [ê¸°ìˆ  ìŠ¤íƒ](#ê¸°ìˆ -ìŠ¤íƒ)
- [í”„ë¡œì íŠ¸ êµ¬ì¡°](#í”„ë¡œì íŠ¸-êµ¬ì¡°)
- [ì„¤ì¹˜ ë° ì‹¤í–‰](#ì„¤ì¹˜-ë°-ì‹¤í–‰)
- [API ì—”ë“œí¬ì¸íŠ¸](#api-ì—”ë“œí¬ì¸íŠ¸)
- [WebSocket ì´ë²¤íŠ¸](#websocket-ì´ë²¤íŠ¸)
- [í™˜ê²½ ë³€ìˆ˜ ì„¤ì •](#í™˜ê²½-ë³€ìˆ˜-ì„¤ì •)

---

## ğŸ¯ í”„ë¡œì íŠ¸ ê°œìš”

ë³¸ í”„ë¡œì íŠ¸ëŠ” ë‘ ê°€ì§€ í•µì‹¬ ì‹œìŠ¤í…œì„ í†µí•©í•œ ìŠ¤ë§ˆíŠ¸ íŒ©í† ë¦¬ í”Œë«í¼ì…ë‹ˆë‹¤:

1. **ğŸš— IoT ìë™ì°¨ ê²€ì‚¬ ì‹œìŠ¤í…œ (Flask ë°±ì—”ë“œ)**
   - MQTT í”„ë¡œí† ì½œì„ í†µí•œ ì‹¤ì‹œê°„ ì„¼ì„œ ë°ì´í„° ìˆ˜ì§‘
   - AI ì¹´ë©”ë¼ ê¸°ë°˜ ì™¸ê´€ ë¶ˆëŸ‰ íƒì§€
   - ì›¹ ëŒ€ì‹œë³´ë“œì—ì„œ ì‹¤ì‹œê°„ ê²€ì‚¬ ê²°ê³¼ ëª¨ë‹ˆí„°ë§

2. **ğŸ‘¥ ê·¼íƒœ & ì±„íŒ… ì‹œìŠ¤í…œ (Spring Boot ë°±ì—”ë“œ)**
   - ì§ì› ì¶œí‡´ê·¼ ê´€ë¦¬ (ì¶œê·¼/í‡´ê·¼/ì—°ì°¨/ë³‘ê°€ ë“±)
   - WebSocket ê¸°ë°˜ ì‹¤ì‹œê°„ ì±„íŒ…
   - ì›”ê°„ ê¸‰ì—¬ ìš”ì•½ ë° ê·¼íƒœ í†µê³„

---

## âœ¨ ì£¼ìš” ê¸°ëŠ¥

### ğŸš— IoT ìë™ì°¨ ê²€ì‚¬ ì‹œìŠ¤í…œ
| ê¸°ëŠ¥ | ì„¤ëª… |
|------|------|
| **ì„¼ì„œ ê²€ì‚¬** | LED, WHEEL ë“± ë‹¤ì–‘í•œ ì„¼ì„œë¥¼ í†µí•œ ê¸°ëŠ¥ ê²€ì‚¬ |
| **ì™¸ê´€ ê²€ì‚¬** | AI ì¹´ë©”ë¼ë¥¼ ì´ìš©í•œ ìë™ì°¨ ì™¸ê´€ ë¶ˆëŸ‰ íƒì§€ |
| **ì‹¤ì‹œê°„ ì•Œë¦¼** | WebSocketì„ í†µí•œ ì‹¤ì‹œê°„ ë¶ˆëŸ‰ ê°ì§€ ì•Œë¦¼ |
| **MQTT ì—°ë™** | ì´ˆìŒíŒŒ ì„¼ì„œ(ULT01/02/03) ì‹¤ì‹œê°„ ë°ì´í„° ìˆ˜ì§‘ |

### ğŸ‘¥ ê·¼íƒœ & ì±„íŒ… ì‹œìŠ¤í…œ
| ê¸°ëŠ¥ | ì„¤ëª… |
|------|------|
| **ì¶œí‡´ê·¼ ê´€ë¦¬** | ì¶œê·¼/í‡´ê·¼ ì²˜ë¦¬, ìë™ ì§€ê° íŒì • |
| **ì—°ì°¨/ë³‘ê°€ ê´€ë¦¬** | ì—°ì°¨/ë°˜ì°¨/ë³‘ê°€ ì‹ ì²­ ë° ì°¨ê° |
| **ê¸‰ì—¬ ê³„ì‚°** | ì¼ë‹¹ì œ/ì‹œê¸‰ì œ ìë™ ê¸‰ì—¬ ê³„ì‚° |
| **ì‹¤ì‹œê°„ ì±„íŒ…** | WebSocket ê¸°ë°˜ ë‹¨ì²´ ì±„íŒ… |
| **ìë™ ê²°ê·¼ ì²˜ë¦¬** | í‰ì¼ 18:01 í‡´ê·¼ ë¯¸ì²˜ë¦¬ ê°ì§€, 00:00:01 ê²°ê·¼ ìë™ ê¸°ë¡ |
| **ê´€ë¦¬ì ê¸°ëŠ¥** | ê·¼íƒœ ìˆ˜ì •/ì‚­ì œ, ì›”ê°„ í†µê³„ |

---

## ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ

### ğŸš— Flask ë°±ì—”ë“œ (ìë™ì°¨ ê²€ì‚¬ ì‹œìŠ¤í…œ)
```
ğŸ Python 3.x
ğŸŒ Flask 3.1.2 - ì›¹ í”„ë ˆì„ì›Œí¬
ğŸ”Œ Flask-SocketIO 5.5.1 - ì‹¤ì‹œê°„ í†µì‹ 
ğŸ—„ï¸ SQLAlchemy 2.0.45 - ORM
ğŸ” Flask-JWT-Extended - JWT ì¸ì¦
ğŸ“¡ paho-mqtt 2.1.0 - MQTT í´ë¼ì´ì–¸íŠ¸
ğŸ”„ Flask-Migrate 4.1.0 - ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜
ğŸ”’ bcrypt - ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™”
ğŸ¬ PyMySQL 1.1.2 - MySQL ë“œë¼ì´ë²„
```

### ğŸ‘¥ Spring Boot ë°±ì—”ë“œ (ê·¼íƒœ & ì±„íŒ… ì‹œìŠ¤í…œ)
```
â˜• Java 17
ğŸƒ Spring Boot 4.0.1 - ì›¹ í”„ë ˆì„ì›Œí¬
ğŸ”Œ Spring WebSocket (STOMP) - ì‹¤ì‹œê°„ í†µì‹ 
ğŸ—„ï¸ Spring Data JPA - ORM
ğŸ“¡ MySQL Connector J - MySQL ë“œë¼ì´ë²„
ğŸ”„ Lombok - ì½”ë“œ ìë™ ìƒì„±
```

### ğŸ“Š ë°ì´í„°ë² ì´ìŠ¤
| ì‹œìŠ¤í…œ | ë°ì´í„°ë² ì´ìŠ¤ |
|--------|-------------|
| Flask (ê²€ì‚¬ ì‹œìŠ¤í…œ) | SQLite (ê°œë°œ) / MySQL (í”„ë¡œë•ì…˜) |
| Spring (ê·¼íƒœ ì‹œìŠ¤í…œ) | MySQL (`smart_factory` DB) |

### ğŸ¨ í”„ë¡ íŠ¸ì—”ë“œ
```
âš›ï¸ React 19.2.3
ğŸ”Œ Socket.io-client 4.8.1
ğŸ“Š Recharts 2.15.4
```

---

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
404-spring/
â”‚
â”œâ”€â”€ ğŸ“ chat-service/                    # Spring Boot (ê·¼íƒœ & ì±„íŒ…)
â”‚   â”œâ”€â”€ pom.xml                         # Maven ì„¤ì •
â”‚   â””â”€â”€ src/main/java/com/example/chat_service/
â”‚       â”œâ”€â”€ ChatServiceApplication.java # ë©”ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜
â”‚       â”œâ”€â”€ config/
â”‚       â”‚   â”œâ”€â”€ WebConfig.java          # ì›¹ ì„¤ì •
â”‚       â”‚   â””â”€â”€ WebSocketConfig.java    # WebSocket ì„¤ì •
â”‚       â”œâ”€â”€ controller/
â”‚       â”‚   â”œâ”€â”€ ChatController.java     # ì±„íŒ… ì»¨íŠ¸ë¡¤ëŸ¬
â”‚       â”‚   â”œâ”€â”€ AttendanceController.java    # ì¶œí‡´ê·¼ API
â”‚       â”‚   â””â”€â”€ AdminAttendanceController.java # ê´€ë¦¬ì API
â”‚       â”œâ”€â”€ service/
â”‚       â”‚   â”œâ”€â”€ AttendanceService.java      # ê·¼íƒœ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚       â”‚   â”œâ”€â”€ AttendanceAdminService.java # ê´€ë¦¬ì ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚       â”‚   â””â”€â”€ AttendanceScheduler.java    # ìŠ¤ì¼€ì¤„ëŸ¬
â”‚       â”œâ”€â”€ entity/
â”‚       â”‚   â”œâ”€â”€ Employee.java          # ì§ì› ì—”í‹°í‹°
â”‚       â”‚   â””â”€â”€ AttendanceLog.java     # ê·¼íƒœ ê¸°ë¡ ì—”í‹°í‹°
â”‚       â”œâ”€â”€ repository/
â”‚       â”‚   â”œâ”€â”€ EmployeeRepository.java
â”‚       â”‚   â””â”€â”€ AttendanceLogRepository.java
â”‚       â””â”€â”€ dto/
â”‚           â”œâ”€â”€ ChatMessage.java
â”‚           â””â”€â”€ AttendanceLogResponse.java
â”‚
â”œâ”€â”€ ğŸ“ 404-back/                        # Flask (ìë™ì°¨ ê²€ì‚¬) - ë³„ë„ ë””ë ‰í† ë¦¬
â”‚   â”œâ”€â”€ app.py                          # Flask ì—”íŠ¸ë¦¬í¬ì¸íŠ¸
â”‚   â”œâ”€â”€ extensions.py                   # Flask í™•ì¥ ì´ˆê¸°í™”
â”‚   â”œâ”€â”€ requirements.txt                # Python ì˜ì¡´ì„±
â”‚   â”œâ”€â”€ models/                         # ë°ì´í„°ë² ì´ìŠ¤ ëª¨ë¸
â”‚   â”‚   â”œâ”€â”€ car.py
â”‚   â”‚   â”œâ”€â”€ employee.py
â”‚   â”‚   â”œâ”€â”€ sensor_result.py
â”‚   â”‚   â”œâ”€â”€ camera_result.py
â”‚   â”‚   â””â”€â”€ defect_image.py
â”‚   â”œâ”€â”€ routes/                         # API ë¼ìš°íŠ¸
â”‚   â”‚   â”œâ”€â”€ auth.py
â”‚   â”‚   â”œâ”€â”€ sensor.py
â”‚   â”‚   â”œâ”€â”€ camera.py
â”‚   â”‚   â”œâ”€â”€ dashboard_defect.py
â”‚   â”‚   â””â”€â”€ socket_events.py
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â””â”€â”€ mqtt_service.py
â”‚   â”œâ”€â”€ front/                          # React í”„ë¡ íŠ¸ì—”ë“œ
â”‚   â””â”€â”€ migrations/
â”‚
â”œâ”€â”€ ğŸ“„ README.md                        # ë³¸ ë¬¸ì„œ
â””â”€â”€ ğŸ“„ .gitignore
```

---

## ğŸš€ ì„¤ì¹˜ ë° ì‹¤í–‰

### ê³µí†µ ìš”êµ¬ì‚¬í•­
- **Flask**: Python 3.8+, Node.js 14+
- **Spring**: Java 17, Maven 3.6+
- MQTT Broker (Mosquitto)
- MySQL 8.0+

---

### 1ï¸âƒ£ Spring Boot (ê·¼íƒœ & ì±„íŒ… ì‹œìŠ¤í…œ) ì„¤ì •

```bash
# chat-service ë””ë ‰í† ë¦¬ë¡œ ì´ë™
cd chat-service

# ì˜ì¡´ì„± ì„¤ì¹˜ ë° ë¹Œë“œ
mvn clean install

# ì„œë²„ ì‹¤í–‰ (ê¸°ë³¸ í¬íŠ¸ 8080)
mvn spring-boot:run

# ë˜ëŠ” JAR íŒŒì¼ë¡œ ì‹¤í–‰
java -jar target/chat-service-0.0.1-SNAPSHOT.jar
```

---

### 2ï¸âƒ£ Flask (ìë™ì°¨ ê²€ì‚¬ ì‹œìŠ¤í…œ) ì„¤ì •

```bash
# 404-back ë””ë ‰í† ë¦¬ë¡œ ì´ë™
cd 404-back

# ê°€ìƒí™˜ê²½ ìƒì„± (ê¶Œì¥)
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate

# ì˜ì¡´ì„± ì„¤ì¹˜
pip install -r requirements.txt

# ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™”
flask db upgrade

# ì„œë²„ ì‹¤í–‰ (í¬íŠ¸ 5000)
python app.py
```

---

### 3ï¸âƒ£ í”„ë¡ íŠ¸ì—”ë“œ ì„¤ì •

```bash
# í”„ë¡ íŠ¸ì—”ë“œ ë””ë ‰í† ë¦¬ë¡œ ì´ë™
cd 404-back/front

# ì˜ì¡´ì„± ì„¤ì¹˜
npm install

# ê°œë°œ ì„œë²„ ì‹¤í–‰ (í¬íŠ¸ 3000)
npm start
```

---

### 4ï¸âƒ£ MQTT Broker ì„¤ì •

```bash
# Windows (Chocolatey)
choco install mosquitto
mosquitto -v

# Linux/Mac (Homebrew)
brew install mosquitto
mosquitto -c /usr/local/etc/mosquitto/mosquitto.conf
```

---

## ğŸ“¡ API ì—”ë“œí¬ì¸íŠ¸

### ğŸ” ê·¼íƒœ ê´€ë¦¬ API (Spring Boot - `/api/attendance`)

| ë©”ì„œë“œ | ì—”ë“œí¬ì¸íŠ¸ | ì„¤ëª… | ìš”ì²­ ë³¸ë¬¸ |
|--------|-----------|------|----------|
| POST | `/api/attendance/check-in` | ì¶œê·¼ ì²˜ë¦¬ | `{"id": 1}` |
| POST | `/api/attendance/check-out` | í‡´ê·¼ ì²˜ë¦¬ | `{"id": 1}` |

### ğŸ‘‘ ê´€ë¦¬ì API (Spring Boot - `/api/admin/attendance`)

| ë©”ì„œë“œ | ì—”ë“œí¬ì¸íŠ¸ | ì„¤ëª… | íŒŒë¼ë¯¸í„° |
|--------|-----------|------|----------|
| POST | `/api/admin/attendance/update` | ê·¼íƒœ ìƒíƒœ ì¼ê´„ ìˆ˜ì • | `employeeId`, `status`, `date`, `endDate` |
| DELETE | `/api/admin/attendance/delete` | ê·¼íƒœ ê¸°ë¡ ì¼ê´„ ì‚­ì œ | `employeeId`, `date`, `endDate` |
| GET | `/api/admin/attendance/monthly/{employeeId}` | íŠ¹ì • ì‚¬ì› ì›”ê°„ ì¡°íšŒ | `year`, `month` (ì„ íƒ) |
| GET | `/api/admin/attendance/salary/all-summary` | ì „ ì‚¬ì› ì›”ê¸‰ ìš”ì•½ | `year`, `month` (ì„ íƒ) |
| GET | `/api/admin/attendance/monthly/all` | ì „ ì‚¬ì› ì›”ê°„ ê¸°ë¡ ì¡°íšŒ | `year`, `month` (ì„ íƒ) |

### ğŸš— ìë™ì°¨ ê²€ì‚¬ API (Flask - `/` ê¸°ë°˜)

| ë©”ì„œë“œ | ì—”ë“œí¬ì¸íŠ¸ | ì„¤ëª… | ì¸ì¦ |
|--------|-----------|------|------|
| POST | `/auth/login` | ë¡œê·¸ì¸ | âŒ |
| GET | `/sensor/result` | ì„¼ì„œ ê²€ì‚¬ ê²°ê³¼ ì¡°íšŒ | âœ… |
| GET | `/camera/result` | ì¹´ë©”ë¼ ê²€ì‚¬ ê²°ê³¼ ì¡°íšŒ | âœ… |
| GET | `/dashboard/summary` | í†µê³„ ìš”ì•½ | âœ… |

---

## ğŸ”Œ WebSocket ì´ë²¤íŠ¸

### ğŸš— IoT ì‹œìŠ¤í…œ WebSocket (Flask-SocketIO)

| ì´ë²¤íŠ¸ | ì„¤ëª… | ë°ì´í„° |
|-------|------|-------|
| `car_added` | ìƒˆ ì°¨ëŸ‰ ì¶”ê°€ë¨ | `{car_id}` |
| `sensor_defect` | ì„¼ì„œ ë¶ˆëŸ‰ ê°ì§€ | `{car_id, device, result, created_at}` |
| `camera_defect` | ì¹´ë©”ë¼ ë¶ˆëŸ‰ ê°ì§€ | `{car_id, result, images[], created_at}` |
| `stats_update` | í†µê³„ ì—…ë°ì´íŠ¸ | `{total_count, overall, sensor, camera}` |

### ğŸ‘¥ ê·¼íƒœ & ì±„íŒ… ì‹œìŠ¤í…œ WebSocket (Spring STOMP)

#### ì±„íŒ… (ì±„ë„: `/topic/public`)
| ì´ë²¤íŠ¸ | ì„¤ëª… |
|-------|------|
| STOMP SUBSCRIBE | `/topic/public` êµ¬ë… |
| SEND | `/app/chat.sendMessage` ë©”ì‹œì§€ ì „ì†¡ |
| SEND | `/app/chat.addUser` ì‚¬ìš©ì ì¶”ê°€ |

#### ê·¼íƒœ ì•Œë¦¼ (ì±„ë„: `/topic/attendance/{employeeId}`)
| ì´ë²¤íŠ¸ | ì„¤ëª… | ë°ì´í„° |
|-------|------|-------|
| `CHECK_IN` | ì¶œê·¼ ì™„ë£Œ | `{type, status, time}` |
| `CHECK_OUT` | í‡´ê·¼ ì™„ë£Œ | `{type, status, time, dailyWage, workingMinutes}` |
| `LEAVE_UPDATE` | ì—°ì°¨/ë³‘ê°€ ë³€ê²½ | `{type, status, remainingLeave, remainingSickLeave}` |
| `ABSENT` | ê²°ê·¼ ìë™ ì²˜ë¦¬ | `{type, status, date}` |

---

## ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ

### MySQL (`smart_factory`) - Spring Boot

#### `employee` í…Œì´ë¸”
| ì»¬ëŸ¼ | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| `id` | BIGINT | PK, ìë™ ìƒì„± |
| `employee_number` | VARCHAR(8) | ì‚¬ì›ë²ˆí˜¸ (ê³ ìœ ) |
| `name` | VARCHAR(100) | ì´ë¦„ |
| `department` | VARCHAR(50) | ë¶€ì„œ |
| `position` | VARCHAR(50) | ì§ê¸‰ |
| `password_hash` | VARCHAR(255) | ë¹„ë°€ë²ˆí˜¸ í•´ì‹œ |
| `monthly_salary` | INT | ì›”ê¸‰ |
| `hourly_rate` | INT | ì‹œê¸‰ |
| `annual_leave` | DOUBLE | ì—°ì°¨ ì”ì—¬ |
| `sick_leave` | INT | ë³‘ê°€ ì”ì—¬ |

#### `attendance` í…Œì´ë¸”
| ì»¬ëŸ¼ | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| `id` | BIGINT | PK, ìë™ ìƒì„± |
| `employee_id` | BIGINT | FK, ì‚¬ì› ID |
| `work_date` | DATE | ê·¼ë¬´ ë‚ ì§œ |
| `check_in` | TIME | ì¶œê·¼ ì‹œê°„ |
| `check_out` | TIME | í‡´ê·¼ ì‹œê°„ |
| `status` | VARCHAR(20) | ìƒíƒœ (ì¶œê·¼/ì§€ê°/í‡´ê·¼/ì—°ì°¨/ë³‘ê°€ ë“±) |
| `working_minutes` | INT | ì‹¤ì œ ê·¼ë¬´ ì‹œê°„ (ë¶„) |
| `daily_wage` | INT | ì¼ë‹¹ |

---

## âš™ï¸ í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

### Spring Boot (`chat-service/src/main/resources/application.properties`)

```properties
# ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •
spring.datasource.url=jdbc:mysql://127.0.0.1:3306/smart_factory?serverTimezone=Asia/Seoul
spring.datasource.username=root
spring.datasource.password=1234
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# JPA ì„¤ì •
spring.jpa.hibernate.ddl-auto=update
